/* iOS-specific styles for Ditto app */

/* Base iOS support */
@supports (-webkit-touch-callout: none) {
  html,
  body {
    height: -webkit-fill-available;
  }

  #root {
    min-height: -webkit-fill-available;
    height: -webkit-fill-available;
    min-height: calc(var(--ios-vh, 1vh) * 100);
  }

  /* App container */
  .app {
    /* Use the full height of the viewport on iOS */
    height: -webkit-fill-available;
    /* Use custom iOS viewport height if available */
    height: calc(var(--ios-vh, 1vh) * 100);
    padding-bottom: var(--safe-area-bottom);
  }

  /* Header adjustments for notch */
  .app-header {
    padding-top: var(--safe-area-top);
  }

  /* Footer adjustments for home indicator */
  .app-footer {
    padding-bottom: var(--safe-area-bottom);
    z-index: 300;
    position: fixed;
    bottom: 0;
  }

  /* Input field adjustments */
  .form {
    margin-bottom: var(--safe-area-bottom);
    padding-bottom: var(--safe-area-bottom);
  }

  /* Text area adjustments */
  .text-area {
    /* Prevent zoom on focus in iOS */
    font-size: 16px;
    padding-left: var(--safe-area-left, var(--spacing-md));
    padding-right: calc(var(--safe-area-right, 0px) + 40px);
  }

  /* Submit button adjustments */
  .submit {
    height: 44px;
    min-height: 44px;
    border-radius: var(--border-radius-md);
    padding-right: calc(var(--spacing-md) + var(--safe-area-right, 0px));
  }

  /* Body content adjustments */
  .app-body {
    padding-bottom: calc(80px + var(--safe-area-bottom));
    margin-bottom: calc(80px + var(--safe-area-bottom));
  }

  /* Chat feed adjustments */
  .chat-feed {
    padding-bottom: calc(80px + var(--safe-area-bottom));
  }

  /* Fix for iOS Safari in standalone PWA mode */
  @media all and (display-mode: standalone) {
    body {
      /* Ensure content doesn't get hidden under the home indicator, but only in Safari */
      padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    /* Override padding values for PWA mode */
    .app {
      /* PWA mode doesn't need extra padding at bottom */
      padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    .app-header {
      /* Ensure proper top padding in PWA mode using env() */
      padding-top: env(safe-area-inset-top, 0px);
    }

    .app-footer {
      position: fixed !important;
      bottom: 0 !important;
      z-index: 1000 !important;
      /* Use safe-area-inset-bottom directly in PWA mode */
      padding-bottom: env(safe-area-inset-bottom, 0px) !important;
    }

    /* Reduce padding for app-body in PWA mode */
    .app-body {
      padding-bottom: calc(80px + env(safe-area-inset-bottom, 0px));
      margin-bottom: calc(80px + env(safe-area-inset-bottom, 0px));
    }

    /* Reduce padding for chat feed in PWA mode */
    .chat-feed {
      padding-bottom: calc(80px + env(safe-area-inset-bottom, 0px));
    }

    /* Fix form spacing in PWA mode */
    .form {
      margin-bottom: env(safe-area-inset-bottom, 0px);
      padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    /* Ensure the icon buttons are properly positioned */
    .ditto-icon-button {
      margin-top: env(safe-area-inset-top, 0px);
    }

    /* Make modals aware of safe area in PWA mode */
    .modal-header {
      padding-top: env(safe-area-inset-top, 0px);
    }

    /* Fix for modal close buttons */
    .modal-close-button,
    .modal-maximize-button {
      top: calc(env(safe-area-inset-top, 0px) + 10px);
    }
  }

  /* Disable pinch zoom */
  body {
    touch-action: pan-y;
  }
}

/* Prevent page zoom on iOS */
input,
textarea {
  font-size: 16px;
}
